{"ast":null,"code":"var _jsxFileName = \"/mnt/hgfs/Downloads/venkat/project/fplan/ui/src/com/fplan/components/signing/Auth.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Signin from \"./SignIn\";\nimport SignUp from \"./SignUp\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nconst AUTH_URL = \"http://localhost:3001/api/users\";\n\nclass Auth extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.auth = (fname, lname, email, password, isSignup) => {\n      isSignup ? this.signUp(fname, lname, email, password) : this.signIn(email, password);\n    };\n\n    this.signIn = (email, password) => {\n      const authData = {\n        email,\n        password\n      };\n      axios.post(AUTH_URL + \"?action=signin\", authData).then(response => {\n        console.log(response.data);\n        this.setState({\n          open: false,\n          message: \"\"\n        });\n        localStorage.setItem(\"token\", response.data);\n        this.props.history.push(\"/signinsuccess\");\n      }).catch(err => {\n        console.error(err.response.data);\n        this.setState({\n          open: true,\n          message: err.response.data\n        });\n      });\n    };\n\n    this.signUp = (fname, lname, email, password) => {\n      const authData = {\n        fname,\n        lname,\n        email,\n        password\n      };\n      axios.post(AUTH_URL + \"?action=signup\", authData).then(response => {\n        console.log(response.data);\n        this.props.history.push(\"/signupsuccess\");\n      }).catch(err => {\n        console.log(\"error status \", err.response.status);\n        console.log(\"error message \", err.response.data);\n      });\n    };\n\n    this.state = {\n      url: \"\",\n      email: \"\",\n      password: \"\",\n      open: false,\n      message: \"\"\n    };\n  }\n\n  componentWillMount() {\n    this.setState({\n      url: window.location.pathname\n    });\n  }\n\n  render() {\n    const signpage = this.state.url === \"/signin\" ? /*#__PURE__*/React.createElement(Signin, {\n      auth: this.auth,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }) : /*#__PURE__*/React.createElement(SignUp, {\n      auth: this.auth,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, signpage, /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.state.open,\n      anchorOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      message: this.state.message,\n      autoHideDuration: 6000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default Auth;","map":{"version":3,"sources":["/mnt/hgfs/Downloads/venkat/project/fplan/ui/src/com/fplan/components/signing/Auth.js"],"names":["React","Component","axios","Signin","SignUp","Snackbar","AUTH_URL","Auth","auth","fname","lname","email","password","isSignup","signUp","signIn","authData","post","then","response","console","log","data","setState","open","message","localStorage","setItem","props","history","push","catch","err","error","status","state","url","componentWillMount","window","location","pathname","render","signpage","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Signin from \"./SignIn\";\nimport SignUp from \"./SignUp\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst AUTH_URL = \"http://localhost:3001/api/users\";\n\nclass Auth extends Component {\n  auth = (fname, lname, email, password, isSignup) => {\n    isSignup\n      ? this.signUp(fname, lname, email, password)\n      : this.signIn(email, password);\n  };\n\n  signIn = (email, password) => {\n    const authData = {\n      email,\n      password,\n    };\n\n    axios\n      .post(AUTH_URL + \"?action=signin\", authData)\n      .then((response) => {\n        console.log(response.data);\n        this.setState({ open: false, message: \"\" });\n        localStorage.setItem(\"token\", response.data);\n        this.props.history.push(\"/signinsuccess\");\n      })\n      .catch((err) => {\n        console.error(err.response.data);\n        this.setState({ open: true, message: err.response.data });\n      });\n  };\n\n  signUp = (fname, lname, email, password) => {\n    const authData = {\n      fname,\n      lname,\n      email,\n      password,\n    };\n\n    axios\n      .post(AUTH_URL + \"?action=signup\", authData)\n      .then((response) => {\n        console.log(response.data);\n\n        this.props.history.push(\"/signupsuccess\");\n      })\n      .catch((err) => {\n        console.log(\"error status \", err.response.status);\n        console.log(\"error message \", err.response.data);\n      });\n  };\n\n  state = {\n    url: \"\",\n    email: \"\",\n    password: \"\",\n    open: false,\n    message: \"\",\n  };\n\n  componentWillMount() {\n    this.setState({ url: window.location.pathname });\n  }\n\n  render() {\n    const signpage =\n      this.state.url === \"/signin\" ? (\n        <Signin auth={this.auth}></Signin>\n      ) : (\n        <SignUp auth={this.auth}></SignUp>\n      );\n    return (\n      <div>\n        {signpage}\n        <Snackbar\n          open={this.state.open}\n          anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n          message={this.state.message}\n          autoHideDuration={6000}\n        ></Snackbar>\n      </div>\n    );\n  }\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}